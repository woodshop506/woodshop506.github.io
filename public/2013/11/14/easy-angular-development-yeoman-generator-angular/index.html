<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Easy Angular development with Yeoman & generator-angular</title>
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="stylesheet" href="/css/style.css" type="text/css" media="all" />
        <link href='http://fonts.googleapis.com/css?family=Lora:400,700' rel='stylesheet' type='text/css'>
    </head>
    <body>
      <!--
      <div class="stripey-guy">
        <div class="container">
          <div class="inner">
            <div></div><div></div><div></div><div></div><div></div><div></div>
          </div>
        </div>
      </div>
      -->

      

      <div id="main" class="container">
              <div class="site-header">
        <div class="r">
          <div class=g-12>
            <p class=site-header-copy>
              <span class="lined-header-span">You're reading an article on 
                <a href="/">JJT.io</a>, a web development
                blog by <a href="/about">Jason Trill</a>
              </span>
            </p>
          </div>
          <!--
          <div class="g-4 text-right">
            <p>You're reading an article on</p>
          </div>
          <div class="site-title-g">
            <a href="/" class="site-title">
              <span class="st1">J</span>
              <span class="st2">J</span>
              <span class="st3">T</span>
              <span class="st4">.</span>
              <span class="st5">I</span>
              <span class="st6">O</span>
            </a>
          </div>

          <div class="g-4">
            <p>which is a blog by Jason Trill</p>
          </div>
          -->
        </div>
      </div>

      <div class=site-content>
        <div class="r post-body">
  <div class="g-12">
      <p class="post-meta">14 Nov 2013</p>
      <h1>Easy Angular development with Yeoman & generator-angular</h1>
      <p>One of the best things to happen in web development over the past few years has been the variety of tools built on <a href='http://nodejs.org/'>Node.js</a> and made available through its package manager, <a href='https://npmjs.org/'>npm</a>. Among the 75,000 or so modules, there are three that I use almost every hour of every working day: <a href='http://gruntjs.com/'>Grunt</a>, a versatile task runner; <a href='http://bower.io/'>Bower</a>, a frontend asset package manager; and <a href='http://yeoman.io/'>Yeoman</a>, a generator framework that automates repetitive scaffolding and dev/deploy tasks, using Grunt and Bower.</p>

<p>This article will focus on using Yeoman and <a href='https://github.com/yeoman/generator-angular'>generator-angular</a> to set up a great environment for developing Angular applications in a modular, testable fashion. With only a handful of terminal commands, we&#8217;ll have the following features:</p>

<ul>
<li>Development server (connect) with livereload</li>

<li>Unit and integration testing framework (karma)</li>

<li>Choice between Javascript (default) and Coffeescript</li>

<li>Project scaffolding (index.html, scripts/style/images directories, etc)</li>

<li>Generators for routes, controllers, views, directives, etc.</li>

<li>Sass/Compass and Coffeescript watch &amp; compilation</li>

<li>Production build tasks (uglify, css min, static versioning, concat, etc)</li>
</ul>

<p>If Angular isn&#8217;t your thing, there are also <a href='http://yeoman.io/community-generators.html'>dozens of other Yeoman generators</a> that are worth checking out, including <code>generator-generator</code> which is a generator that helps build your own generators. Xzibit would be proud.</p>

<p>I&#8217;m going to be writing this targeted at Linux/Mac, but Windows users <em>should</em> be able to follow along, as most of the commands are similar.</p>

<h2 id='getting_started'>Getting started</h2>

<p>The first thing is to make sure we have Node available, as everything in this article relies on it. If you have <code>node</code> and <code>npm</code> commands available to you, you&#8217;re probably good to go and can skip this part.</p>

<p>For installating Node, I&#8217;d recommend <a href='https://github.com/creationix/nvm'>nvm</a> if you&#8217;re on Linux/Mac, or the Windows installer from <a href='http://nodejs.org/'>the Node homepage</a>. Much like pyenv/rbenv/rvm, nvm allows us to install, manage, and switch seamlessly between Node versions. <em>Highly recommended</em>.</p>

<pre><code>$ curl -O https://raw.github.com/creationix/nvm/master/install.sh
$ cat install.sh         # Let&#39;s see what they want us to install
$ sh install.sh &amp;&amp; source ~/.nvm/nvm.sh
$ nvm install 0.10   # Stable minor branch at time of writing
$ nvm use 0.10
$ node --version
  v0.10.22</code></pre>

<p>Once we have Node, we&#8217;ll install <code>generator-angular</code> which will also automatically install Yeoman, Grunt, and Bower. Then we&#8217;ll run the generator to scaffold our application by answering some questions about our project. We&#8217;re going to go with the defaults for this install, but on future projects feel free to ditch Bootstrap. However, I&#8217;d recommend keeping the default Angular modules unless you have a compelling reason to strip them out.</p>

<pre><code>$ npm install -g generator-angular
$ mkdir myApp &amp;&amp; cd myApp
$ npm install generator-angular    # Local install to myApp
$ yo angular:app myApp    # Add the --coffee flag for coffescript

[?] Would you like to include Twitter Bootstrap? (Y/n)
[?] Would you like to use the SCSS version of Twitter Bootstrap with the Compass CSS Authoring Framework? (Y/n)
[?] Which modules would you like to include? (Press &lt;space&gt; to select)
❯⬢ angular-resource.js
 ⬢ angular-cookies.js
 ⬢ angular-sanitize.js
 ⬢ angular-route.js</code></pre>

<p>After answering these configuration questions, Yeoman will take a minute to scaffold our project files and pull down Node and Bower modules. Once that finishes, we&#8217;ll have our development environment all set up.</p>

<p>Here are some relevant directories/files that Yeoman made for us:</p>

<pre><code>▾ app/               # Main directory for application
  ▾ scripts/         # Angular js/coffee directory where most of our
    ▸ controllers/   #   yeoman-generated modules will go 
    app.js           # Main application js file
  ▸ styles/          # css/scss
  ▸ views/           # Angular views
    index.html       # Entry point to our single page app
▸ test/              # Tests (shocking, I know)
  bower.json         # Bower configuration file
  Gruntfile.js       # Grunt configuration file
  package.json       # Node/npm configuration file</code></pre>

<h2 id='grunt_work'>Grunt work</h2>

<p>Assuming everything went smoothly, we should be able to start our server with Grunt. Running <code>grunt server</code> will fire off a bunch of tasks, the last one being the &#8220;watch&#8221; task which monitors our html/scss/css/js/coffee/etc files and recomplies as necessary.</p>

<pre><code>$ grunt server
# ... Grunt will start a bunch of tasks 
Running &quot;watch&quot; task
Waiting...</code></pre>

<p>Somewhere before Grunt enters the &#8220;watch&#8221; task, it will open a browser tab pointed to <code>http://127.0.0.1:9000</code> which should be the front page of our app: some chipper dialogue with a big, green &#8220;Splendid!&#8221; button.</p>
<p>
  <a class='imglink' href='/assets/posts/images/ng-generator-1.png'>
    <img src='/assets/posts/images/ng-generator-1.png' />
  </a>
</p>
<p>All of the features promised in the intro are now available to us and we can focus on developing our app, which is a great place to be after issuing just a half dozen commands in a terminal (Node installation not withstanding).</p>

<p>Now let&#8217;s turn to how Yeoman can help us in fleshing out our application with its other generators.</p>

<h2 id='let_it_all_ang_out'>Let it all Ang out</h2>

<p>The focus of this post is generator-angular so some Angular knowledge is assumed for this section. As long as you&#8217;re familiar with MVC frameworks you should be able to follow along. If you&#8217;re looking for more how-to-Angular, I recommend the classic <a href='http://egghead.io/lessons'>Egghead.io videos</a>.</p>

<p>When we ran <code>yo angular:app myApp</code>, we used only one of the dozen or so available generators. We can get the list of available generators by typing <code>yo --help</code>, but here&#8217;s a better reference:</p>

<ul>
<li><a href='https://github.com/yeoman/generator-angular#app'>angular</a> (aka <a href='https://github.com/yeoman/generator-angular#app'>angular:app</a>)</li>

<li><a href='https://github.com/yeoman/generator-angular#controller'>angular:controller</a></li>

<li><a href='https://github.com/yeoman/generator-angular#directive'>angular:directive</a></li>

<li><a href='https://github.com/yeoman/generator-angular#filter'>angular:filter</a></li>

<li><a href='https://github.com/yeoman/generator-angular#route'>angular:route</a></li>

<li><a href='https://github.com/yeoman/generator-angular#service'>angular:service</a></li>

<li><a href='https://github.com/yeoman/generator-angular#service'>angular:provider</a></li>

<li><a href='https://github.com/yeoman/generator-angular#service'>angular:factory</a></li>

<li><a href='https://github.com/yeoman/generator-angular#service'>angular:value</a></li>

<li><a href='https://github.com/yeoman/generator-angular#service'>angular:constant</a></li>

<li><a href='https://github.com/yeoman/generator-angular#decorator'>angular:decorator</a></li>

<li><a href='https://github.com/yeoman/generator-angular#view'>angular:view</a></li>
</ul>

<p>We&#8217;re going to use a few of them now to create a new <code>foo</code> route, with a matching controller and view. Since we want all three to be named <code>foo</code>, we can take a shortcut by just using the route generator, which will call the controller and view generators in turn.</p>

<pre><code>$ yo angular:route foo
  invoke   angular:controller:/path/to/myApp/node_modules/generator-angular/route/index.js
  create     app/scripts/controllers/foo.js
  create     test/spec/controllers/foo.js
  invoke   angular:view:/path/to/myApp/node_modules/generator-angular/route/index.js
  create     app/views/foo.html</code></pre>

<p>So what did this do for us?</p>

<ul>
<li>Created a <code>foo</code> controller with a matching test</li>

<li>Created a <code>foo</code> view</li>

<li>Added a <code>foo</code> route in the main <code>app.js</code> file, lacing up the controller and view</li>

<li>Added a <code>&lt;script&gt;</code> tag to <code>index.html</code> to load the controller</li>
</ul>

<p>If we were to go to <code>http://127.0.0.1:9000/#/foo</code> now, we would see the stunningly beautiful sight of &#8220;This is the foo view&#8221; on a blank page. At this point we would edit the files we just created to make our foo page into something.</p>

<p>The other angular generators are much the same in their functionality - they exist to save time by handling all the monotonous scaffolding tasks.</p>

<h2 id='production_build'>Production build</h2>

<p>Once our app has gotten to the point where we want to release it, we&#8217;ll want to use the <code>grunt build</code> task. This will take our site and build an optimized version for deployment.</p>

<pre><code>$ grunt build
# ... Tasks running ... 
Done, without errors.

Elapsed time
concurrent:dist       8s  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 84%
autoprefixer:dist  172ms  ▇ 2%
ngmin:dist         258ms  ▇ 3%
copy:dist          291ms  ▇ 3%
uglify:generated   513ms  ▇▇ 6%
Total 9s</code></pre>

<p>Once the build finishes, we&#8217;ll have a <code>dist</code> directory that we can push to a production server. Since Angular is completely a frontend framework this can be a simple static server like S3, or as part of the static assets of a backend server.</p>

<h2 id='we_all_grunt_differently'>We all Grunt differently</h2>

<p>In this article, we&#8217;ve used just the Grunt tasks that generator-angular created for us. While providing tons of common functionality and a good baseline, it won&#8217;t fit everyone&#8217;s needs. A nice thing about generator-angular is that it produces what can be thought of as a Gruntfile boilerplate that we can add to or modify.</p>

<p>Need to build to <code>../../some/other/path/build</code> instead of <code>dist</code>? Just change <code>yeoman.dist</code> at the top of the <code>grunt.initConfig</code> function. Want to use Less instead of Sass/Compass? Install <a href='https://github.com/gruntjs/grunt-contrib-less'>grunt-contrib-less</a>, add a <code>less</code> configuration block, and call the <code>less</code> task wherever <code>compass</code> would get called. Want to use Angular&#8217;s <a href='http://docs.angularjs.org/guide/dev_guide.services.$location#general-overview-of-the-api_$location-service-configuration'>html5Mode</a> and pushState for prettier urls? <a href='/2013/11/16/angular-html5mode-using-yeoman-generator-angular/'>I&#8217;ve got us covered</a>. We haven&#8217;t even scratched the surface of <a href='http://eirikb.github.io/nipster/#grunt'>available Grunt packages</a>.</p>

<p>One cautionary note is that the more you modify your Gruntfile, the harder it will be to update to a new version of generator-angular for a given project. It&#8217;s currently at v0.6.0-rc1, which means the project has the potential for rapid and deep change. Even so I think it&#8217;s a productivity win using generator-angular and modifying to suit, even if you do risk some time updating in the future.</p>
  </div>
</div>

<div class="r">
  <div class="g-12">
    <h2>Comments <span class='subhead'>(Disqus, naturally)</span></h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'jjtio';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>

<div class="r">
 <div class="g-12">
   <p><em>Suggestions? Ping me <a href="http://twitter.com/jasontrill/">on Twitter @jasontrill</a>,
    or <a href="https://github.com/jjt/jjt.github.io/issues">open a Github issue</a>.
    Pull requests are gladly accepted, but open an issue first to talk about any major changes.
  </em></p>

    <h2>Recent articles</h2>
      <ul class="posts list-plain list-delta">
        
          <li><a href="/2014/07/30/building-a-board-game-with-react-js/">Building a board game with React.js</a> <span>30 Jul 2014</span></li>
        
          <li><a href="/2014/07/18/analyzing-source-files-to-automatically-create-custom-lo-dash-builds-in-73-characters/">Analyzing source files to automatically create custom Lo-Dash builds in 73 characters</a> <span>18 Jul 2014</span></li>
        
          <li><a href="/2014/02/13/luxtrubuk-a-jeopardy-simulator-built-on-react/">LUXTRUBUK: a JEOPARDY!™ simulator built on React</a> <span>13 Feb 2014</span></li>
        
          <li><a href="/2014/01/08/some-thoughts-on-web-development-practices/">Some thoughts on web development practices</a> <span>08 Jan 2014</span></li>
        
          <li><a href="/2013/11/25/why-any-developer-should-check-out-the-ergodox-keyboard/">The ErgoDox keyboard a year in, and why you should get one</a> <span>25 Nov 2013</span></li>
        
      </ul>
    </div>
  </div>
</div>

 </div>
</div>

      </div>

      </div>

      <div id="footer" class="footer container">
          <a href="http://github.com/jjt/">github.com/jjt</a>
          <a href="http://twitter.com/jasontrill/">twitter.com/jasontrill</a>
          <a href="mailto:jason@jasontrill.com">jason@jasontrill.com</a>
          <span>&copy;Jason Trill</span>
      </div>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-11820998-2', 'jjt.io');
        ga('send', 'pageview');

      </script>
    </body>
</html>

